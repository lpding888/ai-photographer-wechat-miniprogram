<!-- ç§¯åˆ†æ˜ç»†é¡µé¢ -->
<view class="credits-container">
  <!-- ç§¯åˆ†æ¦‚è§ˆå¡ç‰‡ -->
  <view class="overview-card">
    <view class="overview-header">
      <text class="overview-title">ğŸ’ æˆ‘çš„ç§¯åˆ†</text>
      <button class="info-btn" bindtap="showCreditInfo">â„¹ï¸</button>
    </view>

    <view class="credits-display">
      <text class="current-credits">{{userCredits}}</text>
      <text class="credits-label">å½“å‰ç§¯åˆ†</text>
    </view>

    <view class="stats-row">
      <view class="stat-item">
        <text class="stat-number">{{totalEarned}}</text>
        <text class="stat-label">ç´¯è®¡æ”¶å…¥</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-number">{{totalSpent}}</text>
        <text class="stat-label">ç´¯è®¡æ”¯å‡º</text>
      </view>
    </view>

    <button class="recharge-btn" bindtap="goToRecharge">
      <text class="btn-icon">ğŸ’³</text>
      <text>ç§¯åˆ†å……å€¼</text>
    </button>
  </view>

  <!-- ç­›é€‰æ¡ä»¶ -->
  <view class="filter-section">
    <view class="filter-tabs">
      <view
        class="filter-tab {{item.key === currentFilter ? 'active' : ''}}"
        wx:for="{{filters}}"
        wx:key="key"
        bindtap="switchFilter"
        data-filter="{{item.key}}"
      >
        <text class="filter-icon">{{item.icon}}</text>
        <text class="filter-label">{{item.label}}</text>
      </view>
    </view>
  </view>

  <!-- æ˜ç»†åˆ—è¡¨ -->
  <view class="records-section">
    <view class="section-header" wx:if="{{records.length > 0}}">
      <text class="section-title">æ˜ç»†è®°å½•</text>
      <text class="record-count">å…±{{records.length}}æ¡</text>
    </view>

    <view class="records-list">
      <view
        class="record-item"
        wx:for="{{records}}"
        wx:key="_id"
      >
        <view class="record-icon">
          <text class="icon-emoji">{{item.type_icon}}</text>
        </view>

        <view class="record-content">
          <view class="record-header">
            <text class="record-type">{{item.type_text}}</text>
            <text class="record-amount {{item.amountClass}}">
              {{item.amount_display}}
            </text>
          </view>

          <view class="record-details">
            <text class="record-time">{{item.formatted_time}}</text>
            <text class="record-description" wx:if="{{item.description}}">{{item.description}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more" wx:if="{{hasMore && !loading}}">
      <text class="load-more-text">ä¸‹æ‹‰åŠ è½½æ›´å¤š</text>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-state" wx:if="{{loading}}">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!loading && isEmpty}}">
      <text class="empty-icon">ğŸ“</text>
      <text class="empty-text">æš‚æ— ç§¯åˆ†è®°å½•</text>
      <text class="empty-tip">å®Œæˆç­¾åˆ°æˆ–å……å€¼æ¥è·å¾—ç§¯åˆ†å§</text>
      <button class="empty-action" bindtap="goToRecharge">ç«‹å³å……å€¼</button>
    </view>
  </view>
</view>